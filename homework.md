# 作业要求

## 集群要求

| role       | number |
| ---------- | ------ |
| ``master`` | 1      |
| ``salve``  | 2      |
| ``MHA``    | 1      |

## 功能列表

- 一主两从同步复制(**半同步复制**)
- 主库故障，从库自动切换(**``MHA``**)

## 演示用表

- ``position``

| field      | type        | key             |
| ---------- | ----------- | --------------- |
| ``id``     | ``int``     | ``primary key`` |
| ``name``   | ``varchar`` | -               |
| ``salary`` | ``varchar`` | -               |
| ``ciry``   | ``varchar`` | -               |

- ``position_detail``

| field           | type     | id              |
| --------------- | -------- | --------------- |
| ``id``          | ``int``  | ``primary key`` |
| ``pid``         | ``int``  | -               |
| ``description`` | ``text`` | -               |

## 作业要求

- 基本环境
- 软件版本
- 架构介绍
- 安装过程
- 操作问题
- 注意事项

# 演示步骤

## 环境介绍

- 基础环境
- 软件版本
- 组件角色
  - 角色
  - 作用
  - ``IP``

## 同步复制

- 创建新表
- 插入数据（**创建基本数据**）
- 查询主从（**确认基本数据**）
- 插入数据（**后期数据变更**）
- 查询主从（**确认数据同步**）

- 日志插卡（**底层确认同步**）

## 故障容灾

- 关闭主数据库，确认自动切换从库
- 查看从库状态，确认切换成功

- 使用切换主库，确认主从同步

